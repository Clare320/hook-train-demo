第一次和大家分享，大家中间有不清楚的地方可以随时提出来。好，那我们现在就开始吧。这一次主要和大家聊一下React Hook，从它的优势和基本使用这两个方面聊一下。  
现在已经好几个项目在使用React了，像CMS，百秀m站，后台小伙伴正在做的后台管理系统。我们目前项目基本上都是写class组件和纯函数组件，大家写class组件觉得繁琐吗？ class组件里面你要考虑它的声明周期，它状态更新条件等等，总之写class组件的时候不仅代码写的多，要考虑的也多。  有的小伙伴就会想到纯函数组件，但是纯函数组件不能持有状态，也无法使用生命周期，所以使用场景也是比较有限。   
 React社区还是比较成熟的，一直在持续优化这些问题。React在16.8.0版本提出来的一个新特性，用来解决这些问题。  
 hook特性能让函数组件管理状态，处理副作用。  
 1.  我们写组件的时候可以写hook特性的函数组件，这样可以让我们组件变得简单，更容易理解  
 2. class组件的state逻辑难以复用，使用hook后可以更好地复用状态逻辑  
 3. 解决class组件自身的一些缺陷，不容易被压缩，编译缓慢，热更新支持不稳定  
 
 hook特性解决了这些问题，并且hook是向后兼容，可以跟class组件在同一项目中共存，所以对我们目前已有代码没有影响。

## 优势
优势都是对比出来，我们看一下Hook解决哪些class组件存在的问题。
### Hook使你在无需修改组件情况下复用状态逻辑
1. 如果组件是class，和状态关联的可复用逻辑无法直接复用，每个组件都是单独管理状态，很难直接复用。React现在有render props，HOC这给方式处理，但是这两种方式都特别复杂，使用成本很高。大家遇到这种情况都是尽可能的做状态分割，把状态放到最下层的组件中去管理。这种方式会拆分出来特别多的组件，也很繁琐。 但是Hook的载体是函数，函数在重复调用就没有这些限制了，hook里面状态跟逻辑都是独立的，同时在调用的地方各自起作用，不会相互影响。这里在后面自定义Hook会有体现。  
### Hook可以将组件更加细化，让组件变得更加容易理解
1. React是状态驱动的，大多时候一个组件里面状态逻辑无处不在，很难将细化拆分。这种情况下你写的整个组件代码结构和代码量都比较大，非常不利于测试跟维护。
2. class组件自身是有生命周期，你需要在不同生命周期中处理不同的逻辑，最重要的这些逻辑可能是相互关联的，比如你在`componenetDidMount`中订阅了事件，就需要在`componentWillUnmount`中取消订阅。这两个相互关联的逻辑放在不同的地方去处理很容易出错，并且这种写法也是不利于多人团队维护的。  
3. Hook可以让你不用关注不相关的逻辑，比如class的组件构造方法，还有生命周期，你可以花更多的时间来关注业务逻辑。  
4. 使用Hook后会有一个特别直观的感受，代码结构变得很清晰，代码量也会少很多。 
### Hook没有class那么沉重，在不使用类的情况下可以使用React特性  
1. class相对函数更加抽象，不太好理解。class自身有些方法你是必须要实现的，render，本身复杂，会增加预编译的时间，另外class不能更好地被压缩，也会出现热更新不稳定的情况。Hook则是利用函数去解决了这些问题，使代码更易于优化。
2. Hook为React特性 props， state， context, refs，生命周期都提供了专门的api，可以让我们在函数组件中使用react特性。稍后我们会具体看一下已有的Hook api。

## 趋势 
1. Hook是React未来力推的一个特性，它可以解决了目前React框架存在一些问题，并且提供了一个新的笔记好思路来使用React。
2. 另外class跟hook是共存的，并且hook是向后兼容的，不影响之前写的代码。官方也特别推荐使用Hook。最最主要的是用Hook真的是省力省心。
3. 目前我们常用的第三方库大多已支持Hook。
大家了解过后可以用起来。  

## api  

## useState
声明状态变量，需要传入一个初始state，可以是任意的js有效类型，返回当前state和修改当前state的函数。 和class组件中`this.setState`是同样的作用。不同的是class组件中的setState是合并，而Hook是替换。   

## useEffect 
在React里面我们一般把请求数据、订阅和更改DOM称之为副作用。  
1. useEffect api可以让你在函数组件中执行副作用。告诉React组件需要在渲染完成之后调用对应操作。
2. useEffect接收两个参数，第一个参数是要执行函数，第二个参数是可选的，关联变量，可以控制effect的执行时机
3. 在useEffect内部可以直接使用props和stateeffect会在第一次渲染和每次更新之后都会调用。这里可以通过设置关联变量来控制effect的执行。
4. effect可选的清除机制是通过返回一个函数来执行，像取消订阅这些，这个待会也会在代码中去演示。

## useContext  
接收一个context对象，并返回一个context对象的值

## useReducer  
useState的替代方案，当state结构复杂的时候，采用Redux方式来处理

## useCallback
返回一个关联函数的memoized函数
## useMemo
返回一个memoized值
这两个都是用来减少不必要的渲染 
## useRef
返回一个可变的ref值，可以保存任何类型的对象

下面我们结合例子来具体的看看Hook用法。

 1. 我们先实现一个签到，人数累加的例子，来看一下两种实现组件的区别，现场敲代码
 2. 我们先来看一个抓鱼小游戏的例子，大家可以看一下这个代码，这里面没有构造了，没有声明周期方法，也没有大家常用的this.setState.
 3. 数据请求的场景
 4. 标签管理器来综合看一下各种hook的api的用法
 
 